name: Documentation

on:
  push:
    branches: [ main ]
    paths:
      - 'docs/**'
      - 'README.md'
      - '*.md'
  pull_request:
    paths:
      - 'docs/**'
      - 'README.md'
      - '*.md'
  workflow_dispatch:

jobs:
  spell-check:
    name: Spell Check Documentation
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Spell check with cspell
      uses: streetsidesoftware/cspell-action@v6
      with:
        files: |
          **/*.md
          !node_modules/**
          !venv/**
        config: .cspell.json
        incremental_files_only: false
      continue-on-error: true

  markdown-lint:
    name: Markdown Lint
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Markdown lint
      uses: articulate/actions-markdownlint@v1
      with:
        files: '**/*.md'
        config: .markdownlint.json
        ignore: node_modules
      continue-on-error: true

  link-check:
    name: Check Links
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Link Checker
      uses: lycheeverse/lychee-action@v2
      with:
        args: --verbose --no-progress '**/*.md' '**/*.html'
        fail: true
      continue-on-error: true
